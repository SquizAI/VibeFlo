# TRON Architecture Diagrams

## System Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                             TRON System Architecture                        │
│                                                                             │
│  ┌───────────────────────────────────┐   ┌───────────────────────────────┐  │
│  │         Master Control Agent      │   │        User Interfaces        │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │Lifecycle││Scheduler││Registry││   │  │ Canvas  │    │Command  │   │  │
│  │  │ Manager ││         ││        ││   │  │ Editor  │    │  Line   │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  └───────────────────────────────────┘   └───────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────┐   ┌───────────────────────────────┐  │
│  │      Domain Control Agents        │   │         Worker Agents         │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │Workflow ││ Tools   ││Security││   │  │Executor │    │Executor │   │  │
│  │  │ Agent   ││ Agent   ││ Agent  ││   │  │   A     │    │   B     │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │   MCP   ││   API   ││ Storage││   │  │Executor │    │Executor │   │  │
│  │  │  Agent  ││  Agent  ││ Agent  ││   │  │   C     │    │   D     │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  └───────────────────────────────────┘   └───────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                        Shared Infrastructure                          │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │   Event     │  │  Message    │  │  Security   │  │   State     │  │  │
│  │  │    Bus      │  │   Queue     │  │  Services   │  │   Store     │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                         External Integrations                         │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │    MCP      │  │    API      │  │  Database   │  │   Cloud     │  │  │
│  │  │  Services   │  │  Gateways   │  │  Systems    │  │  Services   │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## MCP Integration Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                         MCP Integration Architecture                        │
│                                                                             │
│  ┌───────────────────────────────────┐   ┌───────────────────────────────┐  │
│  │           MCP Domain Agent        │   │         Workflow Agent        │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │   MCP   ││   MCP   ││  MCP   ││   │  │Workflow │    │Workflow │   │  │
│  │  │ Registry││Tool Bridge│Connector││   │  │Registry │    │ Engine  │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │   MCP   ││   MCP   ││  MCP   ││   │  │Instance │    │  State  │   │  │
│  │  │Security ││Monitoring││Orchestr.││   │  │ Manager│    │ Manager │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  └───────────────────────────────────┘   └───────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────┐   ┌───────────────────────────────┐  │
│  │            Tools Agent            │   │           Worker Agent        │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │  Tool   ││  Tool   ││  Tool  ││   │  │  Node   │    │  Tool   │   │  │
│  │  │Registry ││Executor ││Generator││   │  │Executor │    │Executor │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  │                                   │   │                               │  │
│  └───────────────────────────────────┘   └───────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                         External MCP Services                         │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │  GitHub     │  │ PostgreSQL  │  │  Obsidian   │  │   Vercel    │  │  │
│  │  │    MCP      │  │     MCP     │  │     MCP     │  │     MCP     │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │   Resend    │  │    Neon     │  │   Custom    │  │   Browser   │  │  │
│  │  │     MCP     │  │     MCP     │  │     MCP     │  │     MCP     │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## MCP Data Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                             MCP Data Flow                                   │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │                      ┌─────────────────┐                              │  │
│  │                      │  Workflow Node  │                              │  │
│  │                      │    Execution    │                              │  │
│  │                      └────────┬────────┘                              │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐                              │  │
│  │                      │    Tool Call    │                              │  │
│  │                      │   Resolution    │                              │  │
│  │                      └────────┬────────┘                              │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐      ┌─────────────────┐     │  │
│  │                      │   Tool Bridge   │◄─────┤    MCP Tool     │     │  │
│  │                      │    Lookup       │      │   Definition    │     │  │
│  │                      └────────┬────────┘      └─────────────────┘     │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐      ┌─────────────────┐     │  │
│  │                      │  Parameter      │◄─────┤   Schema        │     │  │
│  │                      │  Validation     │      │  Validation     │     │  │
│  │                      └────────┬────────┘      └─────────────────┘     │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐      ┌─────────────────┐     │  │
│  │                      │  MCP Service    │◄─────┤  MCP Registry   │     │  │
│  │                      │  Resolution     │      │   Lookup        │     │  │
│  │                      └────────┬────────┘      └─────────────────┘     │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐      ┌─────────────────┐     │  │
│  │                      │  MCP Connector  │◄─────┤ Authentication  │     │  │
│  │                      │  Execution      │      │  & Authorization │     │  │
│  │                      └────────┬────────┘      └─────────────────┘     │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐                              │  │
│  │                      │  External MCP   │                              │  │
│  │                      │    Service      │                              │  │
│  │                      └────────┬────────┘                              │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐      ┌─────────────────┐     │  │
│  │                      │  Result         │◄─────┤  Result         │     │  │
│  │                      │  Processing     │      │  Transformation │     │  │
│  │                      └────────┬────────┘      └─────────────────┘     │  │
│  │                               │                                        │  │
│  │                               ▼                                        │  │
│  │                      ┌─────────────────┐                              │  │
│  │                      │  Return to      │                              │  │
│  │                      │  Workflow       │                              │  │
│  │                      └─────────────────┘                              │  │
│  │                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                         TRON Deployment Architecture                        │
│                                                                             │
│  ┌───────────────────────────────────┐   ┌───────────────────────────────┐  │
│  │       Development Environment     │   │      Production Environment    │  │
│  │                                   │   │                               │  │
│  │  ┌─────────┐┌─────────┐┌────────┐│   │  ┌─────────┐    ┌─────────┐   │  │
│  │  │Local Dev││Container││Browser ││   │  │Container│    │Serverless│   │  │
│  │  │ Server  ││  Setup  ││Extension││   │  │Clusters │    │Functions │   │  │
│  │  └─────────┘└─────────┘└────────┘│   │  └─────────┘    └─────────┘   │  │
│  └───────────────────────────────────┘   └───────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                          Integration Layer                            │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │     API     │  │     MCP     │  │  Webhook    │  │   Event     │  │  │
│  │  │   Gateway   │  │   Gateway   │  │  Handlers   │  │  Bridges    │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                       External Integrations                           │  │
│  │                                                                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│  │  │ Application │  │  Databases  │  │  Cloud      │  │    MCP      │  │  │
│  │  │   Servers   │  │             │  │  Services   │  │  Services   │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
``` 